import{u as x,b as h,a as C,c as w}from"./async-module-2f5f9ef4.js";import{p as k,h as n,r as D,w as T}from"./async-module-39a35f42.js";import{a as $,u as R}from"./async-module-08d0ebb5.js";import{a as N}from"../main/index-93f0b128.js";import{s as P}from"./async-module-38047afd.js";import{n as v}from"./async-module-d331ac4b.js";import{d as S}from"./async-module-a57722d3.js";import"./async-module-a356b00f.js";import"./async-module-f7ef348c.js";import"./async-module-d40ead01.js";import"./async-module-456a8791.js";import"./async-module-b04b7353.js";const q={__name:"Detail-view",props:{title:{type:String,default:""},labelWidth:{type:[String,Number],default:100},...x()},setup(u){const e=u,{currentModule:o,currentMenuName:t}=P(N()),l=$(),a=R(),s=h(e.formConfig);k("formConfig",s);const i=C(e.module),r=n(()=>a.params),m=n(()=>({...r.value,...e.extraRequestParams})),c=n(()=>a.params.edit),f=n(()=>{const b=!r.value||!Object.keys(r.value).some(y=>r.value[y]);return!(c.value||!b)}),g=n(()=>(f.value?"创建":"编辑")+(e.title||t.value)),_=D({}),p=async()=>{_.value=await w(o.value,m.value)},d=()=>!f.value&&p();return T(()=>o.value,d),!f.value&&p(),{__sfc:!0,currentModule:o,currentMenuName:t,$router:l,$route:a,props:e,configs:s,moduleName:i,routeParams:r,queryParams:m,useEdit:c,isNew:f,formedTitle:g,formData:_,getData:p,init:d}}};var M=function(){var e=this,o=e._self._c,t=e._self._setupProxy;return o("div",{class:[`page--${t.moduleName||"common"}-detail`,"tw-flex","tw-flex-col","tw-h-full"]},[o("h2",{staticClass:"title tw-py-4 tw-font-bold",domProps:{textContent:e._s(t.formedTitle)}}),o(S,{staticClass:"tw-pb-4"}),e._t("nav"),t.configs.length||Object.keys(t.configs).length?o("form-view",e._b({attrs:{module:t.moduleName,"extra-request-params":t.queryParams,"use-grid":e.$attrs.useGrid,"is-new":t.isNew},scopedSlots:e._u([e._l(e.$scopedSlots,function(l,a){return{key:a,fn:function(s){return[e._t(a,null,null,{...s,formConfig:e.formConfig,formData:t.formData,refreshData:t.getData})]}}})],null,!0),model:{value:t.formData,callback:function(l){t.formData=l},expression:"formData"}},"form-view",e.$attrs,!1)):e._e()],2)},j=[],F=v(q,M,j,!1,null,null,null,null);const A=F.exports,E={__name:"detail",setup(u){return{__sfc:!0,formConfig:[[{control:"IText",key:"text",label:"文本框",required:!0,max:25,useRef:!0,change({config:o,formConfig:t,value:l,formData:a,refs:s}){s["type-i-select"].config.options=[{label:"北京",value:"bj"}]},created(){},mounted(){}},{control:"i-select",key:"type",label:"下拉框",itemText:"label",useRef:!0,options:[{label:"上海",value:"sh"}],change({config:o,formConfig:t,value:l,formData:a,refs:s}){!l&&(a.slotType=null)}}],[{control:"i-checkbox",key:"selected",label:"复选框",allChecked:!0,value:[],rules:[o=>!!(o!=null&&o.length)||"不得少于一项"],change({config:o,formConfig:t,value:l,formData:a}){a.type=null},options:[{label:"一",value:1},{label:"二",value:2}]},{control:"i-radio",key:"gender",label:"选项",value:1,options:[{label:"男",value:1},{label:"女",value:0}]}],[{control:"i-textarea",key:"textArea",label:"文本域",itemText:"label",options:[{label:"上海",value:"sh"}]},{control:"i-test-custom-comp",key:"action",label:"自定义组件",value:321}]],DetailView:A}}};var I=function(){var e=this,o=e._self._c,t=e._self._setupProxy;return o(t.DetailView,{attrs:{"form-config":t.formConfig,"pagination-options":{save:!0}},scopedSlots:e._u([{key:"left_text",fn:function({formData:l,className:a,test:s}){return[o("i-select",{class:a,attrs:{"form-data":l,clearable:!1,config:{itemText:"label",options:[{label:"上海",value:"sh"},{label:"北京",value:"bj"}],change({config:i,formConfig:r,value:m,formData:c}){c.text=""}}},model:{value:l.slotType,callback:function(i){e.$set(l,"slotType",i)},expression:"formData.slotType"}})]}}])})},O=[],V=v(E,I,O,!1,null,null,null,null);const Z=V.exports;export{Z as default};
